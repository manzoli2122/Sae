<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                template="/resources/templates/#{sessionControl.decorator}/decorator.xhtml">


	<ui:define name="title"><h:outputText value="#{msgs['core.installSystem.title']}" /></ui:define>
	
	<ui:define name="body">
		
		<h:panelGroup id="systemInstalled" rendered="#{coreInfo.systemInstalled}">
			<p><h:outputText value="#{msgs['core.installSystem.text.systemAlreadyInstalled']}" /></p>
		</h:panelGroup>

		<h:panelGroup id="systemNotInstalled" rendered="#{! coreInfo.systemInstalled}">
			<h4><h:outputText value="#{msgs['core.installSystem.text.instructions.smtp']}" /></h4>

			<ui:decorate template="/resources/templates/default/form.xhtml">
				<ui:param name="formName" value="#{msgs['core.installSystem.field.config.formulario']}" />
				<h:form id="form" pt:class="form-horizontal">
					<p:focus />
					
					<h:panelGroup id="smtpServerAddressField">
						<ui:decorate template="/resources/templates/default/formfield.xhtml">
							<ui:param name="fieldName" value="form:smtpServerAddress" />
							<ui:param name="label" value="#{msgs['core.installSystem.field.config.smtpServerAddress']}" />
							<p:inputText id="smtpServerAddress" pt:class="form-control" value="#{installSystemControl.config.smtpServerAddress}"
										 pt:placeholder="#{msgs['core.installSystem.field.config.smtpServerAddress']}" required="true">
							</p:inputText>
						</ui:decorate>
					</h:panelGroup>
					
					<h:panelGroup id="smtpServerPortField">
						<ui:decorate template="/resources/templates/default/formfield.xhtml">
							<ui:param name="fieldName" value="form:smtpServerPort" />
							<ui:param name="label" value="#{msgs['core.installSystem.field.config.smtpServerPort']}" />
							<p:inputText id="smtpServerPort" pt:class="form-control"
										 pt:placeholder="#{msgs['core.installSystem.field.config.smtpServerPort']}" 
										 value="#{installSystemControl.config.smtpServerPort}"  required="true">
								<p:ajax event="blur" update="smtpServerPortField" />
							</p:inputText>
						</ui:decorate>
					</h:panelGroup>
					
					<h:panelGroup id="smtpUsernameField">
						<ui:decorate template="/resources/templates/default/formfield.xhtml">
							<ui:param name="fieldName" value="form:smtpUsername" />
							<ui:param name="label" value="#{msgs['core.installSystem.field.config.smtpUsername']}" />
							<p:inputText id="smtpUsername" pt:class="form-control" 
										 pt:placeholder="#{msgs['core.installSystem.field.config.smtpUsername']}" 
										 value="#{installSystemControl.config.smtpUsername}" required="true">
								<p:ajax event="blur" update="smtpUsernameField" />
							</p:inputText>
						</ui:decorate>
					</h:panelGroup>
					
					<h:panelGroup id="smtpPasswordField">
						<ui:decorate template="/resources/templates/default/formfield.xhtml">
							<ui:param name="fieldName" value="form:smtpPassword" />
							<ui:param name="label" pt:class="form-control" value="#{msgs['core.installSystem.field.config.smtpPassword']}" />
							<p:password id="smtpPassword" pt:placeholder="#{msgs['core.installSystem.field.config.smtpPassword']}" 
										value="#{installSystemControl.config.smtpPassword}"  required="true" feedback="false" />
						</ui:decorate>
					</h:panelGroup>
					
					
					<ui:decorate template="/resources/templates/default/formbutton.xhtml">
						<p:commandButton pt:class="pull-left btn btn-default" action="#{installSystemControl.saveSmtpConfig}" 
										 value="#{msgs['crud.button.save']}"  onclick="waitDialog.show()" oncomplete="waitDialog.hide()" 
										 update="form" />
					</ui:decorate>
				</h:form>
			</ui:decorate>
	
	
	
			
			
		</h:panelGroup>
	</ui:define>
</ui:composition>
